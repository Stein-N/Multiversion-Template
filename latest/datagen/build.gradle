plugins {
    id 'common'
    id 'net.neoforged.moddev'
}

dependencies {
    implementation project(":latest:common")
}

neoForge {
    version = neoforge

    def at = file('../common/src/main/resources/META-INF/accesstransformer.cfg')
    if (at.exists()) accessTransformers = [at]

    runs {
        data {
            clientData()
            ideName = "Common Datagen (latest)"
            gameDirectory = file('../fabric/runs/data')
            programArguments = ['--mod', project.mod_id, '--all', '--output', file('../common/src/generated/').getAbsolutePath(), '--existing', file('../common/src/main/resources/').getAbsolutePath()]
        }
    }
    mods {
        "${mod_id}" { sourceSet sourceSets.main }
    }
}

compileJava {
    source(project(':latest:common').sourceSets.main.allSource)
}

processResources {
    from project(":latest:common").sourceSets.main.resources
}